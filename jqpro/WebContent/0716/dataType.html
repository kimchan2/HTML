<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/mycss.css">
<script src="../js/jquery-3.5.1.min.js"></script>
<style>
</style>
<script>

	$(function(){
		
		$("#txt").on("click", function() {
			
// 			$.get("text.jsp", function() {
				
// 			}, "text")
			
			
			$.ajax({
				
				url: "text.jsp",
				method: "get",
				success: function(res) {
					res = res.split(",");
					
					code="<ul>";
					$.each(res, function(i) {
						code += "<li>" + res[i] + "</li>";
					})
					code += "</ul>";
					
					$("#result1").html(code);
				},
				error: function() {
					
				},
				dataType: "text"
				
				
			})
			
		})
		
		$("#json").on("click", function() {
			
			idval = prompt("찾을 아이디를 입력하세요");
// 			$.getJSON("jsObj.jsp", "id=" + idval, function() {
				
// 			})
			
			$.ajax({
				url: "jsObj.jsp",
				method: "get",
				data: "id=" + idval,
				success: function(res) {
					
					code = "아이디 : " + res.id + "<br>";
					code += "이름 : " + res.name + "<br>";
					code += "전화번호 : " + res.hp + "<br>";
					code += "주소: " + res.add1 + "<br>";
					code += "우편번호 : " + res.add2 + "<br>";
					$("#result2").html(code);
				},
				error: function(xhr) {
					alert("상태 : " + xhr.status);
				},
				dataType: "JSON"
				
			})
		})
		
		
		
		$("#jarr").on("click", function() {
			
			
			$.ajax({
				url: "jsArr.jsp",
				method: "get",
				success: function(res) {
					
					code = "<ol>";
					$.each(res, function(i) {
						code += `<li>${res[i]}</li>`;
					})
					code += "</ol>";
					
					$("#result3").html(code);
				},
				error: function(xhr) {
					
				},
				dataType: "json"
			})
			
		})
		
		$("#jobarr").on("click", function() {
			
			$.ajax({
				
				url: "jObArr.jsp",
				method: "get",
				success: function(res) {
					
					str = "";
					$.each(res, function(i) {
						str += (i+1) + "번째 회원 자료<br>";
						str += "아이디 : " + res[i].id + "<br>";
						str += "이름 : " + res[i].name + "<br>";
						str += "전화번호 : " + res[i].hp + "<br>";
						str += "주소 : " + res[i].add1 + "<br>";
						str += "우편번호 : " + res[i].add2 + "<br>";
						str += "<br>";
					})
					$("#result4").html(str);
					
					
				},
				error: function(xhr) {

				},
				dataType: "JSON"
				
			})
			
		})
		
		
		
	})

</script>
</head>
<body>

	<div class="box">
		<h2>1. jQuery Ajax 이용한 비동기</h2>
		<input id="txt" type="button" value="text데이터">
		<input id="json" type="button" value="jsonOb">
		<input id="jarr" type="button" value="jsonArr">
		<input id="jobarr" type="button" value="jobArr">
		<div id="result1"></div>
		<div id="result2"></div>
		<div id="result3"></div>
		<div id="result4"></div>
	</div>
</body>
</html>